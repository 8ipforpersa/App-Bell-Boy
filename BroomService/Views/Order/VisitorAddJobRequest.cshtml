@using BroomService.Resources;
@model BroomService.ViewModels.JobRequestViewModel
@using BroomService.ViewModels;
@{
    var svalue = ViewData["SelectCardData"] as CardViewModel;
    var data = "";
}
<link href="~/Content/style.css" rel="stylesheet" />
<link href="~/Content/bootstrap-chosen.css" rel="stylesheet" />

<script src="~/Content/js/datetimepicker.js" type="text/javascript"></script>
<link href="~/Content/datetimepicker.css" rel="stylesheet" type="text/css" />
<link href="~/Content/css/site.css" rel="stylesheet" />
<style>

    .multiselect-container.dropdown-menu.show {
        max-height: 500px;
        overflow: auto;
    }

    .show_value {
        width: 100%;
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 10px;
        margin-top: 15px;
    }

    .show_mltipl {
        display: inline-block;
        background: #214378;
        color: #fff;
        padding: 5px;
        border-radius: 10px;
        position: relative;
    }

        .show_mltipl i {
            cursor: pointer;
            margin-left: 10px;
        }

    #weeklylist {
        width: 100%;
        margin: 20px 0;
        justify-content: center;
        align-items: center;
        margin: 0;
        justify-content: center;
        align-items: center;
        height: auto;
        box-shadow: none !important
    }

        #weeklylist select {
            width: 50% !important;
            box-shadow: none;
            height: 46px;
            border-radius: 20px;
            padding: 0 15px;
            /* background: transparent; */
            margin: 0 auto;
            border: 2px solid #edecec;
        }



    #div1 {
        width: 700px;
        height: 300px;
        padding: 10px;
        border: 1px solid #aaaaaa;
    }

    .custom-invent label {
        color: #000;
        font-weight: 500;
    }

    .custom-invent .add_values {
        box-shadow: 0 0 5px rgb(0 0 0 / 25%);
        height: 45px;
        line-height: 25px;
        margin-left: 0;
    }

        .custom-invent .add_values input[type="text"]:focus {
            outline: none;
        }

    .custom-invent li {
        border-bottom: 1px solid #e2e2e2;
        padding-bottom: 15px;
        margin-bottom: 15px;
    }

        .custom-invent li:last-child {
            border-bottom: 0px solid #ccc;
            padding-bottom: 0px;
            margin-bottom: 0px;
        }

    .custom-invent .form_edit_input {
        border: 0;
        background-color: transparent;
        font-size: 15px;
        color: #000;
        font-weight: 400;
        box-shadow: none;
        height: 40px;
        padding-left: 15px;
        padding-right: 15px;
        border-radius: 50px;
        width: 75px;
        box-shadow: 0 0 5px rgba(0,0,0,.15);
    }

    .custom-invent .custom_input {
        background-color: rgb(255, 255, 255);
        box-shadow: 0px 7px 16.56px 1.44px rgb(0 0 0 / 8%);
        height: 40px;
        border: 0;
        border-radius: 50px;
    }

    .minus, .plus {
        cursor: pointer !important;
    }

    #Property_List_Id_chosen {
        width: 100%;
        padding-top: 12px;
        padding-right: 30px;
        padding-bottom: 12px;
        padding-left: 10px;
        background: white;
    }

        #Property_List_Id_chosen .chosen-single {
            background: white;
            border-style: none;
        }

    input[type="date"]::-webkit-calendar-picker-indicator {
        background: transparent;
        bottom: 0;
        color: transparent;
        cursor: pointer;
        height: auto;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        width: auto;
    }

    .gj-picker-bootstrap table tr td.today {
        background: #efefef;
    }

        .gj-picker-bootstrap table tr td.today div {
            color: black !important;
        }

    button.btn.arrow_btn_box.submit_back {
        position: relative;
    }

        button.btn.arrow_btn_box.submit_back.backk:before {
            content: 'Back';
            position: absolute;
            bottom: -31px;
            left: 18px;
        }

        button.btn.arrow_btn_box.submit_back.order:before {
            content: 'Order';
            position: absolute;
            bottom: -31px;
            left: 19px;
        }
</style>
<!-- Choose Service box -->
<section id="all_services_boxes" class="all_services_boxes">
    <div class="container">
        <h2>@Resource.job_request</h2>
        <p></p>
        <div class="job_request_form">
            <form class="row">
                <div class="col-12">
                    <div class="form-group">
                        <label class="property_label">@Resource.service_name</label>
                        <div id="Category_add_another">
                            <div class="custom_input">
                                <div class="d-flex">
                                    <div class="service_input_image">
                                        <img src="https://app.broomservice.co.il/Images/Category/@Model.CategoryData.Icon" alt="services">
                                    </div>
                                    @Html.HiddenFor(a => a.CategoryData.Id)
                                    @Html.TextBoxFor(a => a.CategoryData.Name, new { @class = "form-control form_edit_input", @readonly = "readonly" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12" style="display:none">
                    <div class="form-group">
                        @Html.HiddenFor(a => a.SubCategoryData.Id)
                        <label class="property_label">@Resource.sub_service_name</label>
                        <div id="SubCategory_add_another">
                            <div class="custom_input">
                                <div class="d-flex">
                                    <div class="service_input_image">
                                        <img src="https://app.broomservice.co.il/Images/SubCategory/@Model.SubCategoryData.Icon" alt="services">
                                    </div>
                                    @Html.TextBoxFor(a => a.SubCategoryData.Name, new { @class = "form-control form_edit_input", @readonly = "readonly" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @if (Model.SubSubCategoryData != null)
                {
                    <div class="col-12" style="display:none">
                        <div class="form-group">
                            @Html.HiddenFor(a => a.SubSubCategoryData.Id)
                            <label class="property_label">@Resource.sub_service_name</label>
                            <div id="SubSubCategory_add_another">
                                <div class="custom_input">
                                    <div class="d-flex">
                                        <div class="service_input_image">
                                            <img src="https://app.broomservice.co.il/Images/SubSubCategory/@Model.SubSubCategoryData.Icon" alt="services">
                                        </div>
                                        @Html.TextBoxFor(a => a.SubSubCategoryData.Name, new { @class = "form-control form_edit_input", @readonly = "readonly" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                <div class="col-12">
                    <div class="form-group ">
                        <label class="property_label">@Resource.enter_property_name_address</label>
                        <div id="SubCategory_add_another">
                            <div class="custom_input">
                                <div class="d-flex">
                                    @*<div class="service_input_image">
                                            <img src="https://app.broomservice.co.il/Images/SubCategory/@Model.SubCategoryData.Icon" alt="services">
                                        </div>*@
                                    @Html.DropDownListFor(m => m.Property_List_Id, new SelectList(ViewBag.Properties, "Value", "Text", "Text"), "Select Property", new { @style = "width:75%", @class = "form-control form_edit_input" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="property_label">@Resource.start_date_time*</label>
                        <div class="custom_input mb-3">
                            <input type="hidden" id="AssignedWorker" value="" />
                            <input type="hidden" id="JobStartDateTime" value="" />
                            <input id="JobStartDate" class="form_edit_input_icon number_count" placeholder="MM/DD/YYYY" autocomplete="off" />
                            <script>
                                $('#JobStartDate').datepicker({
                                    uiLibrary: 'bootstrap4',
                                    modal: true,
                                    footer: true,
                                    minDate: new Date()
                                });
                            </script>
                        </div>
                        <div class="col-12 align-items-center" id="divMeetingContent" style="display:none">
                            <h6 class="mr-3">Didn't Find The Right Solutions</h6>
                            <button type="button" id="btnMeetingRequest" data-toggle="modal" data-target="#modal_MeetingRequest" class="btn  submit_back">Meeting Request</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="property_label">@Resource.ask_about_end_date_time</label>
                        <div class="d-flex">
                            <div class="cus_on_of">
                                <label class="switch switch_2">
                                    <input type="checkbox" id="EndDateTime">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            <div class="custom_input" id="end_date_time" style="display:none;width:385px" ;>
                                <input id="JobEndDateTime" class="form_edit_input_icon number_count" placeholder="MM/DD/YYYY" />
                                <script>
                                    $('#JobEndDateTime').timepicker({
                                        uiLibrary: 'bootstrap4',
                                        modal: true,
                                        timeFormat: 'HH:mm'
                                    });
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6" id="inventorySection">
                    <div class="form-group">
                        <label class="property_label">@Resource.ask_about_inventory_service</label>
                        <div class="row">
                            <div class="col-12 h-60">
                                <label class="switch switch_2">
                                    <input type="checkbox" id="InventorySwitch">
                                    <span class="slider round"></span>
                                </label>
                                <div class="row p-80" id="InventorySection" style="display: none;">
                                    @*AnotherServiceSection*@
                                    <div class="add_sub_category_list" id="AddInventory">@Resource.add_inventory</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12">
                    <div class="form-group">
                        <label class="property_label">@Resource.ask_about_adding_checklist</label>
                        <div class="row">
                            <div class="col-12 h-60">
                                <label class="switch switch_2">
                                    <input type="checkbox" id="ChecklistSwitch">
                                    <span class="slider round"></span>
                                </label>
                                <div class="row p-80" id="ChecklistSection" style="display:none;">
                                    <div class="col-md-6 mb-3">
                                        <div id='TextBoxesGroup'>
                                            @*<div id="TextBoxDiv1" class="d-flex">*@
                                            @if (ViewBag.CheckList != null)
                                            {
                                                int counter = 0;
                                                foreach (var item in ViewBag.CheckList)
                                                {
                                                    var count = ViewBag.CheckList.Count;

                                                    counter++;
                                                    <div id="TextBoxDiv @counter" class="d-flex">
                                                        <div class="custom_input">
                                                            <input type='text' class="form-control form_edit_input_icon number_count" id='textbox @counter' value="@(item.TaskDetail!=null?item.TaskDetail:"")" placeholder="@Resource.enter_work_for_checklist">
                                                        </div>
                                                        @if (count == counter)
                                                        {
                                                            <button type='button' style="border:0;" onclick="add(this)" class='add_sub_category_list_add addButton'><i class="fa fa-plus"></i></button>
                                                            <button type='button' onclick="remove(this)" style="border:0;display:none;" class='add_sub_category_list_add removeButton'><i class="fa fa-times"></i></button>
                                                        }
                                                        else
                                                        {
                                                            <button type='button' style="border:0;display:none;" onclick="add(this)" class='add_sub_category_list_add addButton'><i class="fa fa-plus"></i></button>
                                                            <button type='button' onclick="remove(this)" style="border:0;" class='add_sub_category_list_add removeButton'><i class="fa fa-times"></i></button>
                                                        }
                                                    </div>
                                                }
                                            }
                                            else
                                            {
                                                <div id="TextBoxDiv1" class="d-flex">
                                                    <div class="custom_input">
                                                        <input type='text' class="form-control form_edit_input_icon number_count" id='textbox1' value="" placeholder="@Resource.enter_work_for_checklist">
                                                    </div>
                                                    <button type='button' style="border:0;" onclick="add(this)" class='add_sub_category_list_add addButton'><i class="fa fa-plus"></i></button>
                                                    <button type='button' onclick="remove(this)" style="display:none;border:0;" class='add_sub_category_list_add removeButton'><i class="fa fa-times"></i></button>
                                                </div>
                                            }
                                            @*</div>*@
                                        </div>
                                        <div>
                                            <span class="add_another_card" id="OpenCheckList">@Resource.getExisting</span> &nbsp;
                                            <span id="saveCheckList" class="add_another_card">@Resource.save</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-12">
                    <div class="form-group">
                        <label class="property_label">@Resource.ask_about_add_job_desc</label>
                        <div class="row">
                            <div class="col-12 h-60">
                                <label class="switch switch_2">
                                    <input type="checkbox" id="JobDescSwitch">
                                    <span class="slider round"></span>
                                </label>
                                <div class="row p-80" id="job_desc" style="display:none;">
                                    <div class="col-12">
                                        @Html.TextAreaFor(a => a.JobDesc, new
                                   {
                                       @class = "form-control job_taxtarea",
                                       placeholder = @Resource.enter_job_desc
                                   })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12">
                    <div class="form-group">
                        <label class="property_label">@Resource.payment_info</label>
                        <div class="row">
                            <div class="col-12 d-flex">
                                <div class="d-flex align-items-center pay_types">
                                    <img src="~/Content/images/pay.png" alt="card"><span>@Resource.debit_credit_card</span>
                                </div>
                                <div class="d-flex align-items-center pay_types">
                                    <img src="~/Content/images/vacuum-cleaner.png" alt="cleaner"><span>@Resource.before_a_job</span>
                                </div>
                                <div class="d-flex align-items-center pay_types">
                                    <img src="~/Content/images/deadline.png" alt="calendar"><span>@Resource.once_in_month</span>
                                </div>
                            </div>
                            <div class="col-12" id="CardDetail">
                                <div class="d-flex flex-nowrap mt-4">
                                    <div class="card_box custom_switch align-items-center d-flex justify-content-between">
                                        <div class="card_info">
                                            <p>@Resource.card_number</p>
                                            @if (ViewBag.CardDetail != null)
                                            {
                                                <p>**** **** **** @ViewBag.CardDetail.CardNumber.Substring(@ViewBag.CardDetail.CardNumber.Length - 4, 4)</p>
                                            }
                                            else
                                            {
                                                <p>**** **** **** ****</p>
                                            }
                                        </div>
                                        <div class="card_logo">
                                            @if (ViewBag.CardDetail != null)
                                            {
                                                if (@ViewBag.CardDetail.CardType.ToUpper() == Resource.visa)
                                                {
                                                    <img src="~/Content/images/visa_logo.png" class="img-fluid" alt="card" />
                                                }
                                                else if (@ViewBag.CardDetail.CardType.ToUpper() == Resource.mastercard)
                                                {
                                                    <img src="~/Content/images/mastercard.png" class="img-fluid" alt="card" />
                                                }
                                                else if (@ViewBag.CardDetail.CardType.ToUpper() == Resource.amercianexpress)
                                                {
                                                    <img src="~/Content/images/americanexpress.png" class="img-fluid" alt="card" />
                                                }
                                                else if (@ViewBag.CardDetail.CardType.ToUpper() == Resource.discover)
                                                {
                                                    <img src="~/Content/images/discover.png" class="img-fluid" alt="card" />
                                                }
                                                else if (@ViewBag.CardDetail.CardType.ToUpper() == Resource.jcb)
                                                {
                                                    <img src="~/Content/images/jcb.png" class="img-fluid" alt="card" />
                                                }
                                            }
                                        </div>
                                    </div>
                                    <div class="add_another_card" id="btnAddCard"><a href="#" data-toggle="modal" data-target="#addCard_Detail" target="_blank">@Resource.add_edit_card_details</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 d-flex justify-content-between submit_box_all">
                    <div class="custom-controls-stacked d-block d-sm-flex align-item-center">
                        @*<label class="custom-control fill-checkbox">
                                <input type="checkbox" id="fast_order_checkbox" class="fill-control-input">
                                <span class="fill-control-indicator"></span>
                                <span class="fill-control-description">@Resource.ask_about_job_for_fast_order</span>
                            </label>*@
                    </div>
                    <button type="button" onclick="goBack()" style="margin-left: 600px;" class="btn arrow_btn_box submit_back backk"><img src="~/Content/images/submit_next_btn.png" alt="next arrow"></button>
                    <button type="button" id="submit_btn" class="btn arrow_btn_box submit_back order"><img src="~/Content/images/submit_prev_btn.png" alt="next arrow"></button>
                </div>
            </form>
        </div>
    </div>
    <div id="cover-spin" style="display:none;"></div>
</section>

<!-- JobREquest Alternative timing Modal -->
<div class="modal fade modal_sub_user" id="JobRequestTiming" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog  modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="checklist_property_main">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <img src="~/Content/images/close_btn.png" alt="close" />
                    </button>
                    <h3>Select Job Start Timing</h3>
                    <div class="col-12 text-left " id="TimeSlot">

                    </div>
                    <div class="col-12 text-right ">
                        <input type="button" id="AvailableTiemSlot_Ok" onclick="" value="OK" class="btn btn-success" />
                        <input type="button" id="No" value="Cancel" class="btn btn-danger" data-dismiss="modal" aria-label="Close" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Notify admin when servioce price is 0 Modal -->
<div class="modal fade modal_sub_user" id="modalAdminNotify" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="checklist_property_main">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <img src="~/Content/images/close_btn.png" alt="close" />
                    </button>
                    <h3>Service Price is Zero Would You Like to notify admin Quote Request</h3>
                    <div class="col-12 text-center ">
                        <input type="button" id="btnSendQuotesRequest" value="Yes" class="btn btn-success" />
                        <input type="button" id="Cancel" value="Cancel" data-dismiss="modal" aria-label="Close" class="btn btn-danger" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--- Add Inventory Modal ------------>
<div class="modal fade modal_sub_user" id="add_inventory" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="checklist_property_main inventpopup">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <img src="/Content/images/close_btn.png" alt="close" />
                    </button>
                    <h3 style="float: left;">@Resource.add_inventory</h3>
                    <div class="add_inventory_main" style="max-height: 350px; overflow-y: auto; overflow-y: auto">
                        @if (ViewBag.Inventory != null)
                        {
                            <ul id="ChkBoxInventory" class="custom-invent">
                                @foreach (var item in ViewBag.Inventory)
                                {
                                    <li>
                                        <div class="d-flex justify-content-between">
                                            <div class="custom-controls-stacked main-invent">
                                                @if (item.Image != null)
                                                {
                                                    <img src="https://appmantechnologies.com:6083/Images/Inventory/@item.Image" style=" height: 75px; width: 75px;" alt="img" class="mr-2" />
                                                }
                                                else
                                                {
                                                    <img src="~/Content/images/custom.png" alt="img" class="mr-2" />
                                                }
                                                <span class="fill-control-description">@item.Name</span>
                                            </div>

                                            <div class="form-group">
                                                <div id="add_values_single_sofa">
                                                    <label class="property_label">Qty</label>
                                                    <div class="add_values">
                                                        <input type="hidden" value="@item.InventoryId" />
                                                        <button type="button" class="minus" onclick="qtyMinus(this)"><i class="fas fa-minus" aria-hidden="true"></i></button>
                                                        <input type="text" name="qtyNumber" placeholder="0" value="@(item.Qty!=null?item.Qty:0)" readonly="readonly">
                                                        <button type="button" class="plus" onclick="qtyPlus(this)"><i class="fas fa-plus" aria-hidden="true"></i></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <p class="invent-desc">, @item.Description</p>
                                    </li>
                                }
                            </ul>
                        }
                    </div>
                    <div class="col-12 text-center inventory_popup_btn">
                        <a id="add_inventory_btn" class="arrow_btn_box">
                            <img src="/Content/images/submit_next_btn.png" alt="next arrow">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add View Image Modal -->
<div class="modal fade modal_sub_user" id="view_img_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="checklist_property_main" style="height:620px; width:400px;position:relative">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <img src="~/Content/images/close_btn.png" alt="close" />
                    </button>
                    <h3>Add Checklist</h3>

                    <div id="photo">
                        <div id="briefcase" style="height:300px;width:700px" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        <img class="" src="" id="imgModal" style="height:300px; width:700px;" />
                    </div>
                    <br />
                    <br />

                    <div id="dragIcons" style="display:inline-flex;  padding:15px">
                        <div style="padding-left:10px;padding-right:10px;padding-bottom:5px;text-align:center">
                            <img width="70" id="1" alt="image2" height="70" ondragstart="drag(event)" src="~/Content/images/custom.png">
                            <br />
                            <label style="text-align:center">Custom</label>
                        </div>

                        <div style="padding-left:10px;padding-right:10px;padding-bottom:5px;text-align:center">
                            <img width="70" id="2" alt="image2" height="70" ondragstart="drag(event)" src="~/Content/images/look.png">
                            <br />
                            <label style="text-align:center">look</label>
                        </div>

                        <div style="padding-left:10px;padding-right:10px;padding-bottom:5px;text-align:center">
                            <img width="70" id="3" alt="image2" height="70" ondragstart="drag(event)" src="~/Content/images/laundry.png">
                            <br />
                            <label style="text-align:center">Laundry</label>
                        </div>

                        <div style="padding-left:10px;padding-right:10px;padding-bottom:5px;text-align:center">
                            <img width="70" id="4" alt="image2" height="70" ondragstart="drag(event)" src="~/Content/images/wipe.png">
                            <br />
                            <label style="text-align:center">Wipe</label>
                        </div>

                        <div style="padding-left:10px;padding-right:10px;padding-bottom:5px;text-align:center">
                            @*<img width="70" alt="image2" height="70" ondragstart="drag(event)" src="~/Content/images/happy_clients.png" onclick="btnConvert_Click()">*@
                            <img width="70" id="5" alt="image2" height="70" ondragstart="drag(event)" src="~/Content/images/refil.png">
                            <br />
                            <label style="text-align:center">Refill</label>
                        </div>
                        <div style="padding-left:10px;padding-right:10px;padding-bottom:5px;text-align:center">
                            <img width="70" id="6" alt="image2" height="70" ondragstart="drag(event)" src="~/Content/images/lock.png">
                            <br />
                            <label style="text-align:center">Lock</label>
                        </div>
                        <div style="padding-left:10px;padding-right:10px;padding-bottom:5px;text-align:center">
                            <img width="70" id="7" alt="image2" height="70" ondragstart="drag(event)" src="~/Content/images/unlock.png">
                            <br />
                            <label style="text-align:center">unlock</label>
                        </div>
                        <div style="padding-left:10px;padding-right:10px;padding-bottom:5px;text-align:center">
                            <img width="70" id="8" alt="image2" height="70" ondragstart="drag(event)" src="~/Content/images/Empty.png">
                            <br />
                            <label style="text-align:center">Empty</label>
                        </div>

                        @*<button onclick="btnConvert_Click()">Save Image</button>*@
                    </div>
                    @*<div id="briefcase"></div>*@

                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Card Detail Modal -->
<div class="modal fade modal_sub_user" id="addCard_Detail" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="checklist_property_main">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <img src="~/Content/images/close_btn.png" alt="close" />
                    </button>
                    <h3>Card Details</h3>
                    <form>
                        <div class="add_another_service_main">

                            <div class="col-12">
                                <div class="form-group">
                                    <label class="property_label">Name As on Card </label>
                                    <div class="custom_input">
                                        <input type="text" autocomplete="off" id="CardName" name="CardName" class="form-control form_edit_input" placeholder="Ex. James" required />
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group">
                                    <label class="property_label">Card Number</label>
                                    <div class="custom_input">
                                        <input type="text" autocomplete="off" id="CardNumber" name="CardNumber" class="form-control form_edit_input" maxlength="16" placeholder="Ex. 1234567890" required />
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group">
                                    <label class="property_label">Cvv</label>
                                    <div class="custom_input">
                                        <input type="text" autocomplete="off" id="Cvv" name="Cvv" class="form-control form_edit_input" maxlength="3" placeholder="Ex. 123" required />
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group">
                                    <label class="property_label">Expiration (MM/YYYY)</label>
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="custom_input">
                                                <input type="text" autocomplete="off" id="Month" name="Month" class="form-control form_edit_input" maxlength="2" placeholder="MM" required />
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="custom_input">
                                                <input type="text" autocomplete="off" id="Year" name="Year" class="form-control form_edit_input" maxlength="4" placeholder="YYYY" required />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 text-center inventory_popup_btn">
                            <button type="submit" style="height: 75px; width: 75px; margin-top: 17px;" class="btn arrow_btn_box submit_back"><img src="~/Content/images/submit_prev_btn.png" alt="next arrow"></button>
                            @*<a id="linkSubmit" class="arrow_btn_box">
                                    <img src="~/Content/images/submit_next_btn.png" alt="next arrow">

                                </a>*@
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Order Detail Modal -->
<div class="modal fade modal_sub_user" id="modelOrder" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="checklist_property_main">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <img src="~/Content/images/close_btn.png" alt="close" />
                    </button>
                    <h3></h3>
                    <div class="add_another_service_main">
                        <p id="pCompanyName">Dear guest, thank you for choosing </p>
                        <p>Please find your check in instructions below:</p>
                        <p id="pAddress">Adress: </p>
                        <p id="pFloor">Floor:  </p>
                        <p id="pApartmentNo">apartment number:  </p>
                        <p id="pBuildingCode">Building code : </p>
                        <p id="pLocationOfKey">The key will be </p>
                        <p id="pAccessProperty">Access to property:</p>
                        <p id="pWifi"> Wifi:</p>
                        <p>You are welcome to use our room service as you wish</p>
                        <p>Simply download broom service app "link" or go to <a></a>app.broomservice.co.il</p>
                        <p>and login with details as below</p>
                        <p>"Sub user login details"</p>
                        <p id="pLoginId">Login Id: </p>
                        <p id="pPassword">Password: </p>
                        <p>Please contact us when you arrive </p>
                        <p>We will be available for any questions you may have </p>
                        <p>Have a nice trip 🥂</p>
                    </div>
                    @*<div class="col-12 text-center inventory_popup_btn">
                            <a href="#" class="arrow_btn_box" onclick="">
                                <img src="~/Content/images/submit_next_btn.png" alt="next arrow">
                            </a>
                        </div>*@
                </div>
            </div>
        </div>
    </div>
</div>

<link href="~/Content/multiselect.css" rel="stylesheet" type="text/css" />
<script src="~/Content/js/multiselect.js" type="text/javascript"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
<script>
   //------------select card-------------------
    $("form").submit(function (e) {
        e.preventDefault();
       // alert('formcall');
        var cardName = $("#CardName").val();
        var cardNumber = $("#CardNumber").val();
        var cvv = $("#Cvv").val();
        var month = $("#Month").val();
        var year = $("#Year").val();
                 $.ajax({
                    url: "@Url.Action("SelectVisitorCard", "Order")",
                    data: {
                        "name": cardName,
                        "cardnumber": cardNumber,
                        "cvv": cvv,
                        "expiremonth": month,
                        "expireyear": year
                    },
                    type: "Post",
                    error: function () {
                        //alert(" An error occurred.");
                    },
                    success: function (data) {
                        //alert(data);
                        if (data=='True')
                        {
                            $("#addCard_Detail").modal('hide');
                        }
                        else
                        {
                            alert('Invalid card detail');
                            $("#addCard_Detail").modal('hide');
                        }
                    }
                });
    });
    //------------select card end-------------------
    function goBack()
    {
        localStorage.setItem('PropertyId', $('#Property_List_Id').val());
        localStorage.setItem('Desc', $('#JobDesc').val());
        history.back();
    }
    $(document).ready(function () {

        //---------------------------page back arrow icon click contain propId and description--------------
        if (localStorage.getItem('PropertyId') != "" && localStorage.getItem('PropertyId') != null )
        {
            $('#Property_List_Id').val(localStorage.getItem('PropertyId'));
        }
        if (localStorage.getItem('Desc') != "" && localStorage.getItem('Desc') != null)
        {
            $("#JobDescSwitch").prop("checked", true);
            $("#job_desc").css('display', 'block');
            $('#JobDesc').val(localStorage.getItem('Desc'));
        }
        //---------------------------------------------------------

            $('#MeetingTime').timepicker({
                timeFormat: 'HH:mm',
                startTime: '06:00',
                dropdown: true,
                scrollbar: true
            });

        $('#add_MeetingRequest').click(function(){
            var date = $('#MeetingDate').val();
            var time =$('#MeetingTime').val();
            if(time != "" && date !="")
            {
                $.ajax({
                            url: "@Url.Action("AddMeetingRequest","Order")",
                    data: {
                        "MeetingDate": date,
                        "MeetingTime": time
                    },
                    type: 'POST',
                    success: function (data) {
                        if (data) {
                            alert("Meeting Request Send Successfully");
                            $("#modal_MeetingRequest").modal('hide');
                        }
                    },
                    error: function () {
                        alert('something went wrong');
                    }
                });

            }
            else {
                alert("Please select date and time");
            }
        });


        $('#btnSendQuotesRequest').click(function(){
            var PropertyId = $("#Property_List_Id").val();
            var ServiceId = $("#CategoryData_Id").val();
            var SubCatId = $("#SubCategoryData_Id").val();
            var SubSubCatId = 0;
            if ($("#SubSubCategoryData_Id").val())
            {
                SubSubCatId = $("#SubSubCategoryData_Id").val();
            }
            if (PropertyId!=0)
            {
                $.ajax({
                    url: "@Url.Action("SendQuotesRequestToAdmin", "Order")",
                    data: {
                        "PropId": PropertyId,
                        "ServiceId": ServiceId,
                        "SubCatId": SubCatId,
                        "SubSubCatId": SubSubCatId
                    },
                    type: 'POST',
                    success: function (data) {
                        if (data) {
                            $('#modalAdminNotify').modal('hide');
                            alert("Quotes Request Send Successfully");

                        }
                    },
                    error: function () {
                        alert('something went wrong');
                    }
                });

            }
            else {
                alert("Please select Property");
            }
        });

        setInterval(function () {
            $("#CardDetail").load(window.location.href + " #CardDetail");
        }, 2000);

    });
</script>

<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36251023-1']);
    _gaq.push(['_setDomainName', 'jqueryscript.net']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script>

<script>
    function allowDrop(ev) {
        ev.preventDefault();
    }


    $('.listbox').multiselect({
        includeSelectAllOption: true
    });


    var inventoryData = new Array();
    var _propertyVal = new Array();
    $("#AddInventory").click(function () {
        var getPropertyListId = $("#Property_List_Id").val();

        for (var i = 0; i < _propertyVal.length; i++) {
            getPropertyListId = jQuery.grep(getPropertyListId, function (value) {
                return value != _propertyVal[i];
            });
        }

        if (getPropertyListId.length > 0) {
            $("#add_inventory").modal('show');
            var blkstr = [];
            $.each(getPropertyListId, function (idx2, val2) {
                var str = val2;
                blkstr.push(str);
            });
            var propertyId = blkstr.join(",");

            $(".add_inventory_main").load('/Order/InventoryView?Property_List_Id=' + propertyId);
        }
        else {
            alert("Please select property for which you want to add the inventory");
        }
    });
</script>

<script>
    $("#add_inventory_btn").click(function () {
        inventoryData.length = 0;
        var propId = $("#Property_List_Id").val().toString();
        var jobDatetime = $("#JobStartDateTime").val().toString();

        if ((propId != 0 && propId != null) && jobDatetime != "") {
            var qty = 0;
            var InventId = 0;
            var deliveryGuyId = 0;
            inventoryData.push({
                PropertyId: propId,
                InventoryId: InventId,
                Qty: qty,
                DeliveryGuyId: deliveryGuyId
            });
            //$.ajax({
            //    url: "/Order/GetDeliveryGuy",
            //    data: { JobDateTime: jobDatetime },
            //    type: 'POST',
            //    success: function (data) {
            //        // alert(data);
            //        if (data != 0) {
            //            deliveryGuyId = data;
            //            //alert(deliveryGuyId);
            //            $('#ChkBoxInventory input[name=qtyNumber]').each(function (i) {
            //                if ($(this).val() > 0) {
            //                    qty = $(this).val();
            //                    InventId = $(this).prev().prev('input[type=hidden]').val();

            //                    inventoryData.push({
            //                        PropertyId: propId,
            //                        InventoryId: InventId,
            //                        Qty: qty,
            //                        DeliveryGuyId: deliveryGuyId
            //                    });
            //                }
            //            });
            //            //alert(JSON.stringify(inventoryData));
            //            $("#add_inventory").modal('hide');
            //        }
            //    },
            //    error: function () {
            //    }
            //});
            $("#add_inventory").modal('hide');
        }
        else {
            alert("Please select property and JobStartDateTime for which you want to add the inventory");
        }
    });
    function bindCategories() {
                $.ajax({
                    url: "/Order/GetCategories",
                    data: {},
                    type: 'POST',
                    dataType: "json",
                    success: function (data) {
                        if (data.length > 0) {
                            $('#category_select').empty();
                            $('#category_select').append(`<option value=@Resource.service_name>@Resource.service_name</option>`);
                            $.each(data, function (key, value) {
                                var optionText = value.Name;
                                var optionValue = value.Id;
                                var optionIcon = value.Icon;
                                $('#category_select').append(`<option class="${optionIcon}" value="${optionValue}">${optionText}</option>`);

                            });
                        }
                    },
                    error: function () {
                    }
                });
    }

    $("#category_select").change(function () {
        $("#subServiceSection").css('display', 'block');
        $('#sub_sub_category_select').empty();
        $("#subSubServiceSection").css('display', 'none');
        var catId = $('#category_select option:selected').val();
        bindSubCategories(catId);
    });

    function bindSubCategories(categoryId) {
        $.ajax({
            url: "/Order/GetSubCategories",
            data: { category_id:categoryId},
            type: 'POST',
            dataType: "json",
            success: function (data) {
                if (data.length > 0) {
                    $('#sub_category_select').empty();
                    $('#sub_category_select').append(`<option value=@Resource.sub_service_name>@Resource.sub_service_name</option>`);
                    $.each(data, function (key, value) {
                        var optionText = value.Name;
                        var optionValue = value.Id;
                        var optionIcon = value.Icon;
                        $('#sub_category_select').append(`<option class="${optionIcon}" value="${optionValue}">${optionText}</option>`);

                    });
                }
            },
            error: function () {
            }
        });
    }

    $("#sub_category_select").change(function () {
        $('#sub_sub_category_select').empty();
        $("#subSubServiceSection").css('display', 'none');
        var catId = $('#sub_category_select option:selected').val();
        bindSubSubCategories(catId);
    });

    function bindSubSubCategories(subCategoryId) {
        $.ajax({
            url: "/Order/GetSubSubCategories",
            data: { sub_category_id: subCategoryId},
            type: 'POST',
            dataType: "json",
            success: function (data) {
                if (data.length > 0) {
                    $("#subSubServiceSection").css('display', 'block');
                    $('#sub_sub_category_select').empty();
                    $('#sub_sub_category_select').append(`<option value=@Resource.sub_service_name>@Resource.sub_service_name</option>`);
                    $.each(data, function (key, value) {
                        var optionText = value.Name;
                        var optionValue = value.Id;
                        var optionIcon = value.Icon;
                        $('#sub_sub_category_select').append(`<option class="${optionIcon}" value="${optionValue}">${optionText}</option>`);

                    });
                }
                else {
                    $("#subSubServiceSection").css('display', 'none');
                }
            },
            error: function () {
            }
        });
    }
</script>

<script>
    var fileData = new Array();
    var checkListData = new Array();
    var subSubCategories = new Array();
    var counter = 2;
    var isFastOrder = false;
    var ServicePropertyList = new Array();
    var repeatlistData = new Array();
    var repeatlistDay = new Array();
    var isPaymentDone = false;
    var RootUrl = '@Url.Content("~/")';
    var html = '';
    var RepeatAnotherServieceStatus=false;
    var IsAnotherService=false;


    subSubCategories.push({
        CategoryId: $("#CategoryData_Id").val(),
        SubCategoryId: $("#SubCategoryData_Id").val(),
        SubSubCategoryyId: $("#SubSubCategoryData_Id").val() == undefined ? "0" : $("#SubSubCategoryData_Id").val()
    });

      $("#submit_btn").click(function () {
          var getPropertyListId = $("#Property_List_Id").val() == null ? 0 : $("#Property_List_Id").val();
          localStorage.removeItem('Desc');
          localStorage.removeItem('PropertyId');
        //alert("PropertyName" + getPropertyListId);
        //alert("AssignedWorker" +$("#AssignedWorker").val());
        var subcategory = @TempData["subCategoryId"] ;
        var subsubcategory = @TempData["subSubCategoryId"];
        var serviceArray =  subSubCategories;
         var startDateTime= $("#JobStartDateTime").val();
         while (ServicePropertyList.length) {
             ServicePropertyList.pop();
         }
        if (getPropertyListId != 0 && startDateTime!="" ) {

            ServicePropertyList.push({
                AssignedUserId: 0,
                Type: subsubcategory == null || subsubcategory == 0 ? false : true,
                StartDateTime: $("#JobStartDateTime").val(),
                PropertyId: $("#Property_List_Id").val(),
                ServiceId: subsubcategory == null || subsubcategory == 0 ? subcategory : subsubcategory
            });
            //alert(JSON.stringify(serviceArray));

            //alert(JSON.stringify(ServicePropertyList));

             $.ajax({
                 url: "@Url.Action("RoomServicePrice", "Order")",
                 //data: { "propertyId": getPropertyListId, "subCategory":subcategory, "subSubCategory":subsubcategory },
                 data: { "propertyId": getPropertyListId, "serviceArr": subSubCategories },
                 dataType: "json",
                 async: false,
                 type: "Post",
                 error: function () {
                    alert("Error on response");
                    },
                success: function (data) {
                    if (data.status) {
                    //alert("Its for test purpose submit api " + data.unitprice)
                                if (getPropertyListId.length > 0) {
                                    if (data.unitprice == 0 || data.unitprice==null )
                                    {
                                        //$("#modalAdminNotify").modal('show');
                                        alert('Service price is zero please choose another one');
                                    }
                                    else {
                                        var price = data.unitprice;
                                        var description = $("#JobDesc").val();
                                        VisitoriCountInvoiceAPI(description, price);
                                        //submitForm();
                                    }
                            }
                            else {
                                alert("@Resource.select_property");
                            }
                    }
                    else if (data == "Session Expired") {
                        window.location.href = "/Account/Login";
                    }
                   }
                         });
        }
        else {
            alert("Please select Property and start date/time for Service");
        }
    });

      function VisitorsubmitForm(docfile, IsPaymentDone, price_service) {
        $('#cover-spin').show();
        var Files = new FormData();
        var propId = $("#Property_List_Id").val()
        Files.append('JobStartDatetime', $("#JobStartDateTime").val());
        if ($("#EndDateTime").prop('checked') == true) {
             Files.append('JobEndDatetime', $("#JobEndDateTime").val());
        }
        Files.append('Property_List_Id', $("#Property_List_Id").val());
       // alert("Property_list_id" +  JSON.stringify($("#Property_List_Id").val()));
        Files.append('CheckList', JSON.stringify(checkListData));
        //alert("CheckList" +  JSON.stringify(checkListData));
        Files.append('JobDesc', $("#JobDesc").val());
       //alert("JobDesc" +  $("#JobDesc").val());
       Files.append('ReferenceImages', fileData);
       Files.append('IsFastOrder', false);
       Files.append('IsVisitor', true);
        //Files.append('FastOrderName', $("#fast_order_name").val());
       // alert("subSubCategories" + JSON.stringify(subSubCategories));
        Files.append('Categories', JSON.stringify(subSubCategories));
        Files.append('InventoryList', JSON.stringify(inventoryData));
        //alert(@Request.Cookies["VisitorLogin"].Values["UserId"]);
        Files.append('UserId', @Request.Cookies["VisitorLogin"].Values["UserId"]);
        Files.append('DocInvoice', docfile);
        Files.append('PropertyService', JSON.stringify(ServicePropertyList));
         Files.append('PaymentInfo', "1");
         Files.append('IsPaymentDone',IsPaymentDone);
        //alert("AJAX call" + RootUrl)
        $.ajax({
            url:  "@Url.Action("AddJobRequest", "Order")",
            data: Files,
            async: false,
            type: 'POST',
            cache: false,
            processData: false,
            contentType: false,
            beforeSend: function () {
                // Show image container
                $("#loader").show();
            },
            success: function (data) {
                //console.log(JSON.stringify(data));
                if (data.status) {
                    //alert(data.message);
                   // alert(" ReqestID" + data.JobRequestID);
                    var price = price_service;
                    var description = $("#JobDesc").val()
                    //alert(price + " " + description)
                    //if(data.jobTimeAlert)
                    //{
                    //    alert("we will try to meet up with that End time but we can't commit to do so");
                    //}
                    setTimeout(function () {
                        VisitoriCountReceiptAPI(description, price, data.JobRequestID, propId);
                        $('#cover-spin').hide();
                    }, 1000);
                   // window.location.href = "/Bookings/BookingsList";
                }
                else
                {
                    //alert(JSON.stringify(data));
                }
            },
            error: function (data) {
                // Hide image container
                $("#loader").hide();
                $('#cover-spin').hide();
                alert("@Resource.some_error_occured");
            },
            complete: function (data) {
                // Hide image container
                $("#loader").hide();
            }
        });
    }

    function VisitoriCountInvoiceAPI(description, price) {
                                            $.ajax({
                                            url: "@Url.Action("VisitoriCountInvoiceAPI", "Order")",
                                            data: { "description": description, "price":price },
                                            dataType: "json",
                                            async: false,
                                            type: "Post",
                                                error: function () {
                                                    alert("Error on response");
                                            },
                                            success: function (data) {
                                                if (data.status) {
                                                    //alert(" Call Submit Form API  IsPaymentDone " + data.IsPaymentDone)
                                                    if(data.IsPaymentDone)
                                                    {
                                                        VisitorsubmitForm(data.message, data.IsPaymentDone, data.unitprice);
                                                    }
                                                    else
                                                    {
                                                        alert("payment request failed please try again");
                                                    }
                                                }
                                                else if (data == "Session Expired") {
                                                    window.location.href = "/Account/Login";
                                                }
                                                    }
                                           });
    }

    function VisitoriCountReceiptAPI(description, price, jobID, propId) {
                                            $.ajax({
                                            url: "@Url.Action("VisitoriCountReceiptAPI", "Order")",
                                            data: {
                                                "description": description,
                                                "price": price,
                                                "jobRequest": jobID,
                                                "Propertyid": propId
                                            },
                                            dataType: "json",
                                            async: false,
                                            type: "Post",
                                            error: function () {
                                                    alert("Error on Receipt Send");
                                            },
                                            success: function (data) {
                                                //alert(JSON.stringify(data));
                                                if (data.status) {
                                                    $('#pCompanyName').append(data.CompanyName);
                                                    $('#pAddress').append(data.Address);
                                                    $('#pApartmentNo').append(data.ApartmentNumber);
                                                    $('#pBuildingCode').append(data.BuildingCode);
                                                    $('#pLocationOfKey').append(data.LocationOfKey);
                                                    $('#pAccessProperty').append(data.AccessToProperty);
                                                    $('#pWifi').append(data.WifiLogin);
                                                    $('#pLoginId').append(data.LoginId);
                                                    $('#pPassword').append(data.Password);
                                                    //alert("Job Request Booked Successfully");
                                                    $("#modelOrder").modal('show');
                                                    //window.location.href = "/Bookings/BookingsList";
                                                }
                                                else if (data == "Session Expired")
                                                {
                                                    window.location.href = "/Account/Login";
                                                }
                                                    }
                                           });
    }



    function remove(item) {
        if (counter == 1) {
            alert("@Resource.no_text_box_to_remove");
            return false;
        }
        $(item).parent().remove();

        var text = $(item).parent().find('input[type=text]').val();
        var index = checkListData.indexOf(text);
        if (index !== -1) {
            checkListData.splice(index, 1);
        }
    }

    function add(item) {
        console.log(item);
        if ($(item).parent().find('input[type=text]').val().length == 0) {
            alert("@Resource.add_text_validation");
        }
        else {
            var decreaseCounter = counter - 1;

            $("#TextBoxDiv" + decreaseCounter).find('.removeButton').css('display', 'block');
            $("#TextBoxDiv" + decreaseCounter).find('.addButton').css('display', 'none');
            $("#TextBoxDiv" + decreaseCounter).find('input[type=text]').attr('disabled', 'true');

            var newTextBoxDiv = $(document.createElement('div'))
                .attr("id", 'TextBoxDiv' + counter);
            newTextBoxDiv.addClass("d-flex");

            newTextBoxDiv.after().html('<div class="custom_input"><input placeholder="@Resource.enter_work_for_checklist" class="form-control form_edit_input_icon number_count" type="text" name="textbox' + counter +
                '" id="textbox' + counter + '" value=""></div><button style="border:0;" onclick="add(this)"  type="button" class="add_sub_category_list_add addButton"><i class="fa fa-plus" aria-hidden="true"></i></button><button type="button" onclick = "remove(this)" style = "border:0;display:none;" class= "add_sub_category_list_add removeButton"><i class="fa fa-times" aria-hidden="true"></i></button>');

            newTextBoxDiv.appendTo("#TextBoxesGroup");

            counter++;
            checkListData.push($("#TextBoxDiv" + decreaseCounter).find('input[type=text]').val());
        }
    }


    $('#JobEndDateTime').change(function () {
        var date = $("#JobStartDate").val()
        if (date != null && date!="")
        {
            var datetime = date + " " + $('#JobEndDateTime').val();
            $('#JobEndDateTime').val(datetime);
        }
        else {
            var val = "";
            $('#JobEndDateTime').val(val);
            alert("Select job start date");
        }
    });


   $('#JobStartDate').change(function () {

            var cdate = new Date($("#JobStartDate").val());
            var subCategory = $("#SubCategoryData_Id").val();
            var subsubCategory = $("#SubSubCategoryData_Id").val();
            if (subsubCategory == undefined) {
                subsubCategory = 0;
            }
            var PropertyId = $("#Property_List_Id").val();
           // alert(cdate + subCategory + subsubCategory);
            if (PropertyId != "" && PropertyId != 0)
            {
                $('#cover-spin').show();
                $.ajax({
                    url: "@Url.Action("CheckAvailability", "Order")",
                    data: {
                        "dayofweek": cdate.getDay(),
                        "subCategoryId": subCategory,
                        "subSubCategoryId": subsubCategory,
                        "JobDate": $("#JobStartDate").val(),
                        "PropId": PropertyId
                          },
                    type: 'POST',
                    success: function (data) {
                       // alert(data);
                        if (data == 'True') {
                            var date = $("#JobStartDate").val();
                            var datetime = date + "  10:00";
                            //var datetime = Time + " " + date;
                            $("#JobStartDateTime").val(datetime);
                        }
                        else
                        {
                            alert('Resourse is not availabele at the date you have selected');
                            // document.getElementById("divMeetingContent").style.display = "flex";
                        }
                        $('#cover-spin').hide();
                    },
                    error: function () {
                        alert('something went wrong');
                        $('#cover-spin').hide();
                    }
                });
            }
            else {
                alert('please select property');
            }

    });

    $("#JobDescSwitch").change(function () {
        if (this.checked) {
            $("#job_desc").css('display', 'block');
        }
        else {
            $("#job_desc").css('display', 'none');
        }
    });


    $("#InventorySwitch").change(function () {
        if (this.checked) {
                $("#InventorySection").css('display', 'block');
        }
        else {
            $("#InventorySection").css('display', 'none');
        }
    });

    $("#ChecklistSwitch").change(function () {
        if (this.checked) {
            $("#ChecklistSection").css('display', 'block');
        }
        else {
            $("#ChecklistSection").css('display', 'none');
        }
    });


      $("#EndDateTime").change(function () {
        if (this.checked) {
            $("#end_date_time").css('display', 'block');
            $("#JobEndDateTime").removeClass("border");
        }
        else {
            $("#end_date_time").css('display', 'none');
        }
    });

   function qtyPlus(el)
   {
      var Plus =  $(el).prev('input[type=text]').val();
      Plus = parseInt(Plus) + 1;
      $(el).prev('input[type=text]').val(Plus);
   }
  function qtyMinus(el)
  {
      var Minus =  $(el).next('input[type=text]').val();
       Minus = parseInt(Minus) - 1;
        if(parseInt(Minus) < 1)
        {
            Minus =0;
        }
     $(el).next('input[type=text]').val(Minus);
    }
</script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="~/Scripts/chosen.jquery.js"></script>
<script>
    $(function () {
        $('#Property_List_Id').chosen();
        //$('#Property_List_Id_chosen a').find('span').text('Select Property');
    });

</script>

